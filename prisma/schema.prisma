generator Client {
    provider = "prisma-client-js"
}

datasource Database {
    provider = "postgresql"
    url      = "postgresql://postgres:postgres@localhost:5432/auth-server?schema=public"
}

model User {
    id        String   @map("id")        @default(uuid())
	login     String   @map("login")
    password  String   @map("password")
	confirmed Boolean  @map("confirmed") @default(false)

	sessions  Session[]

    created   DateTime @map("created")   @default(now())
    updated   DateTime @map("updated")   @default(now())  @updatedAt

    @@id([id])
    @@map("users")
	@@unique([login])
}

model Session {
	id      String   @map("id")      @default(uuid())
	access  String   @map("access") 
	refresh String   @map("refresh")
	user_id String   @map("user_id")

	user    User                                      @relation(fields: [user_id], references: [id])

	created DateTime @map("created") @default(now())
    updated DateTime @map("updated") @default(now())  @updatedAt

	@@id([id])
    @@map("sessions")
	@@unique([user_id, access])
	@@unique([user_id, refresh])
}