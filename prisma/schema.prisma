generator Client {
    provider = "prisma-client-js"
}

datasource Database {
    provider = "postgresql"
    url      = "postgresql://postgres:postgres@localhost:5432/auth-server?schema=public"
}

model User {
    id            String   @map("id")        @default(uuid())
	email         String   @map("email")
    password      String   @map("password")
	confirmed     Boolean  @map("confirmed") @default(false)

	sessions      Session[]
    confirmations Confirmation[]

    created       DateTime @map("created")   @default(now())
    updated       DateTime @map("updated")   @default(now())  @updatedAt

    @@id([id])
    @@map("users")
	@@unique([email])
}

model Session {
	id      String   @map("id")      @default(uuid())
	access  String   @map("access") 
	refresh String   @map("refresh")
	user_id String   @map("user_id")

	user    User                                      @relation(fields: [user_id], references: [id])

	created DateTime @map("created") @default(now())
    updated DateTime @map("updated") @default(now())  @updatedAt

	@@id([id])
    @@map("sessions")
	@@unique([user_id, access])
	@@unique([user_id, refresh])
}

model Confirmation {
    id      String   @map("id")      @default(uuid())
    confirm String   @map("confirm")
    user_id String   @map("user_id")
    
    user    User                                      @relation(fields: [user_id], references: [id])

    created DateTime @map("created") @default(now())
    updated DateTime @map("updated") @default(now())  @updatedAt

    @@id([id])
    @@map("confirmations")
    @@unique([user_id, confirm])
}